# Generated by Clash Verge

redir-port: 7891
tproxy-port: 1536
mixed-port: 7897
ipv6: true
mode: rule
allow-lan: true
disable-keep-alive: true
geodata-mode: false
geo-auto-update: true
geo-update-interval: 24
geox-url:
  asn: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb
experimental:
  http-headers:
    request:
    - name: User-Agent
      value: Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Mobile Safari/537.36
    - name: Accept-Language
      value: en-US,en;q=0.9
unified-delay: true
tcp-concurrent: true
log-level: silent
find-process-mode: always
global-client-fingerprint: chrome
external-controller: 0.0.0.0:9090
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip
external-ui: ./Web/Zash/
secret: set-your-secret
p:
  type: http
  filter: ^(?!.*(导航|.com)).*$
  interval: 86400
  health-check:
    enable: true
    url: https://www.gstatic.com/generate_204
    interval: 300
  proxy: 订阅更新
  header:
    User-Agent:
    - clash-verge/v2.2.3
    - ClashMetaForAndroid/2.11.2.Meta
    - ClashforWindows/0.19.23
    - clash.meta
    - mihomo
A:
  use:
  - BE
All:
  type: url-test
  use:
  - BE

proxy-providers:
  BE:
    url: https://i.stga.cn/api/v1/client/subscribe?token=afdeb7cec74d860c6e625c0400183f8c
    override:
      additional-prefix: BE
    path: ./BE.yaml
    type: http
    filter: ^(?!.*(导航|.com)).*$
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: 订阅更新
    header:
      User-Agent:
      - clash-verge/v2.2.3
      - ClashMetaForAndroid/2.11.2.Meta
      - ClashforWindows/0.19.23
      - clash.meta
      - mihomo
# 节点记忆
profile: # ← 此函数位置请勿变动！此为模块更新时备份恢复订阅变量范围 ↑
  store-selected: true
  store-fake-ip: true
# —————————

# 嗅探模块
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 5228, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain: # 如遇需内部通信的应用请放行该域名
    - "Mijia Cloud"
# —————————

# 网卡模块
tun:
  enable: false
  device: meta
  stack: system
  dns-hijack: [any:53, tcp://any:53]
  udp-timeout: 300
  auto-route: true
  auto-redirect: false
  auto-detect-interface: true
  strict-route: false
    # _____________________# 三星专供 ↓ 范围
#    - com.samsung.android.messaging
#    - com.samsung.android.app.telephonyui
#    - com.samsung.android.dialer
#    - com.samsung.android.incallui
#    - com.samsung.android.smartcallprovider
#    - com.samsung.android.intellivoiceservice
#    - com.android.settings
#    - com.qti.qcc
#    - com.sec.epdg
#    - com.sec.imsservice # 三星专供 ↑ 范围
    # 非三星用户不必理会，三星用户需自行取消注释
    
# —————————


# DNS模块
# 请勿随意变动！
dns:
  enable: true
  ipv6: true
  listen: 0.0.0.0:1053
  respect-rules: true
  enhanced-mode: redir-host
  fake-ip-range: 192.18.0.1/16
  fake-ip-filter:
    - Rule-Set:cn,fakeip-filter,tld-cn
    - "+.tmga.qq.com"
    - "+.cg.qq.com"
    - "+.tencent.com"
    - "+.igamecj.com"
    - "+.mtalk.google.com"
    - "eleparamtool.saelinzi.com"
    - "digitparamtool.saelinzi.com"
  direct-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  proxy-server-nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  nameserver-policy:
    "Rule-Set:cn,tld-cn,种子下载,game_cn,steam_cn,Custom_Direct,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
  nameserver:
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
#------------------------------------------------------------------------------
proxies:
  - {name: ⛔️ 无网, type: reject}
  - {name: 🌎 全球直连, type: direct, udp: true}
  - {name: 🌐 DNS_Hijack, type: dns}
proxy_groups: &proxy_groups {type: select, proxies: [香港, 澳门, 台湾, 新加坡, 日本, 美国, 棒子, 低延迟, 低倍率, 高级节点, 节点选择, ⛔️ 无网, 🌎 全球直连]}
CNproxy_groups: &CNproxy_groups {type: select, proxies: [香港, 澳门, 台湾, 新加坡, 日本, 美国, 棒子, 节点选择, 🌎 全球直连]}
# —————————
proxy-groups:
  - {name: 电报, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/telegram.png"}
    
  - {name: 订阅更新, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/gengxin.png", proxies: [🌎 全球直连, 低延迟], type: select}
  
  - {name: Apple, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/Apple.png"}
    
  - {name: 微软, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/weiruan.png"}
   
  - {name: Cloudflare, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/Custom_OpenClash_Rules/refs/heads/main/icon/cloudflare_.svg"}
    
  - {name: Discord, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/discord.png"}

  - {name: GPT, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/Custom_OpenClash_Rules/refs/heads/main/icon/gpt.svg"}
  
  - {name: 谷歌Ai, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/gemini.png"}

  - {name: TikTok, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/TikTok.png"}

  - {name: 油管, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/youtube.svg"}

  - {name: 币安, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/bian.png"}

  - {name: Google, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/google.svg"}

  - {name: GoogleFCM, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/fcm.png"}
    
  - {name: 微软云, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/weiruanyun.png"}
    
  - {name: GitHub, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/github.png"}

  - {name: Twitter(X), <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/twitter.png"}
    
  - {name: app定位, <<: *CNproxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/dks.png"}

  - {name: DNS解析, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/dns.png"}

  - {name: steam, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/steam.png"}

  - {name: game, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/game.png"}

  - {name: bing, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/bing.png"}

  - {name: emby, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/emby.png"}

  - {name: speed测速, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/speedtext.png"}

  - {name: 代理, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/gfw.png"}

  - {name: 漏网之鱼, <<: *proxy_groups, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/match.png"}
   
  - {name: 广告拦截, proxies: [⛔️ 无网, 🌎 全球直连, REJECT-DROP, PASS], type: select, icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/quguanggao.png"}
#----------------------------------------------

  - {name: 香港, <<: *All, filter: "^(?=.*(香港|HK|hk|Hong Kong|HongKong|hongkong))(?!.*(低倍|X|Google|Pornhub|.cn)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/hk.png"}
      
  - {name: 台湾, <<: *AllBll, filter: "^(?=.*(台湾|新北|彰化|TW|Taiwan)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/tw%20.png"}
    
  - {name: 棒子, <<: *AllBll, filter: "^(?=.*(韩国|首尔|韩)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/bangzi.png"}
    
  - {name: 日本, <<: *AllBll, filter: "^(?=.*(日本|川日|东京|大阪|泉日|埼玉|沪日|深日|JP|Japan))(?!.*(低倍|0\\.[1-9]X)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/riben.png"}

  - {name: 美国, <<: *All, filter: "^(?=.*(美国|US|United States))(?!.*(海外用户|低倍|0\\.[1-9]X)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/usa.png"}

  - {name: 新加坡, <<: *AllBll, filter: "^(?=.*(新加坡|坡|狮城|SG|Singapore))(?!.*(低倍|0\\.[1-9]X)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/xinjiapo.png"}
    
  - {name: 澳门, <<: *All, filter: "^(?=.*(澳门)).*$", icon: "https://raw.githubusercontent.com/sxppya/Custom_OpenClash_Rules/refs/heads/main/icon/%E5%A8%B1%E4%B9%90.svg"}
    
  - {name: 低延迟, <<: *AllBll, filter: "^(?!.*(低倍|X|Google|Pornhub|剩余|距离|到期|Emby)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/diyanchi.png"}
    
  - {name: 低倍率, <<: *All, filter: "^(?=.*(低倍|[0\\.[1-9]]|Emby)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/dibei.png"}

  - {name: 高级节点, <<: *All, filter: "^(?=.*(iepl|IEPL|(?<!\\.)[[1-9][0-9]*x])).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/gaobei.png"}

  - {name: 节点选择, <<: *All, filter: "^(?!.*(不不不)).*$", icon: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/icon/jiedianxuanze.png"}

#规则集
rule-anchor:
  RuleDefault: &RuleDefault {type: http, behavior: classical, format: text, interval: 86400}  
  IPCIDR: &IPCIDR {type: http, behavior: ipcidr, format: mrs, interval: 86400}
  Domain: &Domain {type: http, behavior: domain, format: mrs, interval: 86400}
  yaml: &yaml {type: http, interval: 86400, behavior: domain, format: yaml}
  
rule-providers:    
  Custom_Direct: {<<: *RuleDefault, path: ./rules/Custom_Direct.list, url: "https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/main/rule/Custom_Direct.list"}
    
  Custom_Proxy: {<<: *RuleDefault, path: ./rules/Custom_Proxy.list, url: "https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/main/rule/Custom_Proxy.list"}
  
  Direct: {<<: *RuleDefault, path: ./rules/Direct.list, url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.list"}
       
  GitHub加速: {<<: *RuleDefault, path: ./rules/github加速.list, url: "https://raw.githubusercontent.com/sxppya/Custom_OpenClash_Rules/refs/heads/main/rule/github%E5%8A%A0%E9%80%9F.list"}
  
  app定位: {<<: *RuleDefault, path: ./rules/app定位.list, url: "https://raw.githubusercontent.com/sxppya/rule/refs/heads/master/applocation.list"}
  
  emby: {<<: *RuleDefault, path: ./rules/emby.list, url: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/rule/emby.list"}
  
  反诈: {<<: *RuleDefault, path: ./rules/反诈.list, url: "https://raw.githubusercontent.com/sxppya/--/refs/heads/main/rule/fanzha.list"}
#——————————————————DOMAIN————————————————————————

  cn: {<<: *Domain, path: ./rules/cn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs"}
  
  tld-cn: {<<: *Domain, path: ./rules/tld-cn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tld-cn.mrs"}

  google: {<<: *Domain, path: ./rules/google.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo-lite/geosite/google.mrs"}
  
  proxy: {<<: *Domain, path: ./rules/geolocation-!cn.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"}

  种子下载: {<<: *Domain, path: ./rules/category-public-tracker.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-public-tracker.mrs"}
  
  fakeip-filter: {<<: *Domain, path: ./rules/fakeip-filter.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/fakeip-filter.mrs"}
  
  private: {<<: *Domain, path: ./rules/private.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/private.mrs"}

  OpenAI: {<<: *Domain, path: ./rules/openai.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs"}

  cloudflare: {<<: *Domain, path: ./rules/cloudflare.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cloudflare.mrs"}

  twitter: {<<: *Domain, path: ./rules/twitter.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/twitter.mrs"}
  
  gitHub: {<<: *Domain, path: ./rules/github.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs"}

  Discord: {<<: *Domain, path: ./rules/discord.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/discord.mrs"}

  TikTok: {<<: *Domain, path: ./rules/tiktok.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs"}
   
  paypal: {<<: *Domain, path: ./rules/paypal.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/paypal.mrs"}

  youTube: {<<: *Domain, path: ./rules/youtube.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs"}

  GoogleFCM: {<<: *Domain, path: ./rules/googlefcm.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/googlefcm.mrs"}

  Apple: {<<: *Domain, path: ./rules/apple.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs"}

  onedrive: {<<: *Domain, path: ./rules/onedrive.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/onedrive.mrs"}

  Microsoft: {<<: *Domain, path: ./rules/microsoft.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs"}

  Binance: {<<: *Domain, path: ./rules/binance.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/binance.mrs"}

  steam: {<<: *Domain, path: ./rules/steam.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.mrs"}

  game: {<<: *Domain, path: ./rules/category-games.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-games.mrs"}

  bing: {<<: *Domain, path: ./rules/bing.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bing.mrs"}

  steam_cn: {<<: *Domain, path: ./rules/steam@cn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam@cn.mrs"}

  game_cn: {<<: *Domain, path: ./rules/category-games@cn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-games@cn.mrs"}

  tld-!cn: {<<: *Domain, path: ./rules/tld-!cn.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tld-!cn.mrs"}


#  pikpak: {<<: *Domain, path: ./rules/pikpak.mrs, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/pikpak.mrs"}

#  广告: {<<: *Domain, path: ./rules/mihomo.mrs, url: "https://anti-ad.net/mihomo.mrs"}

  speed测速: {<<: *Domain, path: ./rules/speedtest.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/speedtest.mrs"}
  
  gemini: {<<: *Domain, path: ./rules/gemini.mrs, url: "https://github.com/DustinWin/ruleset_geodata/raw/refs/heads/mihomo-ruleset/ai.mrs"}

#————————————————IPCIDR——————————————————————————————  
  privateip: {<<: *IPCIDR, path: ./rules/privateip.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/privateip.mrs"}
    
  telegram: {<<: *IPCIDR, path: ./rules/telegramip.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/telegramip.mrs"}
  
  googleip: {<<: *IPCIDR, path: ./rules/google.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs"}
    
  cnip: {<<: *IPCIDR, path: ./rules/cnip.mrs, url: "https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cnip.mrs"}

  cloudflareip: {<<: *IPCIDR, path: ./rules/cloudflare.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cloudflare.mrs"}

  twitterip: {<<: *IPCIDR, path: ./rules/twitter.mrs, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geoip/twitter.mrs"}

#————————————————yaml————————————————————————————————

rules:
  - Dst-Port,53,🌐 DNS_Hijack
  - Dst-Port,853,DNS解析
  - Dst-Port,5228,GoogleFCM
  - Rule-Set,GoogleFCM,GoogleFCM
  - Rule-Set,反诈,广告拦截
#  - Rule-Set,广告,广告拦截
  - Rule-Set,speed测速,speed测速
  - Rule-Set,app定位,app定位
  - Rule-Set,种子下载,🌎 全球直连 
  - Rule-Set,GitHub加速,香港
  - Rule-Set,private,🌎 全球直连
  - Rule-Set,privateip,🌎 全球直连,no-resolve
  - Rule-Set,fakeip-filter,🌎 全球直连
  - Rule-Set,Custom_Direct,🌎 全球直连
  - Rule-Set,Custom_Proxy,香港
  - Rule-Set,steam_cn,🌎 全球直连
  - Rule-Set,game_cn,🌎 全球直连 
  - Rule-Set,steam,steam
  - Rule-Set,game,game
  - Rule-Set,gemini,谷歌Ai
  - Rule-Set,OpenAI,GPT
  - Rule-Set,emby,emby
  - Rule-Set,cloudflare,Cloudflare
  - Rule-Set,cloudflareip,Cloudflare,no-resolve  
  - Domain-Suffix,iturrit.com,电报
  - Rule-Set,telegram,电报,no-resolve
  - Rule-Set,twitter,Twitter(X)
  - Rule-Set,twitterip,Twitter(X),no-resolve  
  - Rule-Set,gitHub,GitHub
  - Rule-Set,Discord,Discord
  - Rule-Set,TikTok,TikTok
  - Rule-Set,paypal,微软
  - Rule-Set,youTube,油管
  - Rule-Set,google,Google
  - Rule-Set,googleip,Google,no-resolve 
  - Rule-Set,Apple,Apple
  - Rule-Set,bing,bing
  - Rule-Set,onedrive,微软云
  - Rule-Set,Microsoft,微软
  - Rule-Set,Binance,币安
  - Rule-Set,tld-cn,🌎 全球直连
  - Rule-Set,cn,🌎 全球直连
  - Rule-Set,tld-!cn,代理
  - Rule-Set,proxy,代理
  - Rule-Set,cnip,🌎 全球直连,no-resolve 
  - Dst-Port,80,漏网之鱼
  - Dst-Port,443,漏网之鱼
  - MATCH,🌎 全球直连

